/*
 * JS for mobilescreen2 generated by Exadel Tiggzi
 *
 * Created on: Tuesday, June 19, 2012, 04:09:47 AM (PDT)
 */
/************************************
 * JS API provided by Exadel Tiggzi  *
 ************************************/
/* Setting project environment indicator */
Tiggr.env = "bundle"; /* Object & array with components "name-to-id" mapping */
var n2id_buf = {
    'mobilegrid2': 'j_4',
    'mobilegridcell1': 'j_5',
    'mobilelabel14': 'j_6',
    'mobilegridcell2': 'j_7',
    'mobilegridcell3': 'j_8',
    'mobilelabel16': 'j_9',
    'mobilegridcell4': 'j_10',
    'mobilegridcell5': 'j_11',
    'mobilelabel15': 'j_12',
    'mobilegridcell6': 'j_13',
    'mobilegridcell7': 'j_14',
    'mobilegridcell8': 'j_15',
    'mobilegridcell9': 'j_16',
    'mobilegridcell10': 'j_17',
    'mobilegridcell11': 'j_18',
    'mobilegridcell12': 'j_19'
};
if ("n2id" in window && window.n2id !== undefined) {
    $.extend(n2id, n2id_buf);
} else {
    window.n2id = n2id_buf;
}
Tiggr.AppPages = [{
    "name": "mobilescreen1",
    "location": "mobilescreen1.html"
}, {
    "name": "mobilescreen2",
    "location": "mobilescreen2.html"
}, {
    "name": "current",
    "location": "mobilescreen2.html"
}];
Tiggr.CurrentScreen = 'j_0';

function navigateTo(outcome, useAjax) {
    Tiggr.navigateTo(outcome, useAjax);
}

function adjustContentHeight() {
    Tiggr.adjustContentHeight();
}

function adjustContentHeightWithPadding() {
    Tiggr.adjustContentHeightWithPadding();
}

function unwrapAndApply(selector, content) {
    Tiggr.unwrapAndApply(selector, content);
}

function setDetailContent(pageUrl) {
    Tiggr.setDetailContent(pageUrl);
}
/**********************
 * SECURITY CONTEXTS  *
 **********************/
/*******************************
 *      SERVICE SETTINGS        *
 ********************************/
/*************************
 *      SERVICES          *
 *************************/
var RESTService = new Tiggr.RestService({
    'url': 'https://twitter.com/statuses/public_timeline.json',
    'dataType': 'json',
    'type': 'get',
});
var Camera_service = new Tiggr.CameraService({});
var myService = new Tiggr.RestService({
    'url': 'http://search.twitter.com/search.json?q=twitter&rpp=15&page=2',
    'dataType': 'json',
    'type': 'get',
});
/*************************
 * NONVISUAL COMPONENTS  *
 *************************/
var datasources = [];
var restservice7 = new Tiggr.DataSource(myService, {
    'onComplete': function(jqXHR, textStatus) {
        // refreshing JQM form elemetns
        elts = $("input[data-type='range']");
        if (elts.length != 0) elts.slider("refresh");
    },
    'onSuccess': function(data) {},
    'onError': function(jqXHR, textStatus, errorThrown) {},
    'outMappings': [{
        'PATH': ['refresh_url'],
        'ID': 'mobilelabel16',
        'ATTR': '@'
    }, {
        'PATH': ['query'],
        'ID': 'mobilelabel15',
        'ATTR': '@'
    }, {
        'PATH': ['results[0]', 'from_user_id'],
        'ID': 'mobilelabel14',
        'ATTR': '@'
    }],
    'inMappings': []
});
datasources.push(restservice7);
/************************
 * EVENTS AND HANDLERS  *
 ************************/
// screen onload
screen_C0BE_onLoad = j_0_onLoad = function() {
    createSpinner("files/resources/lib/jquerymobile/images/ajax-loader.gif");
    Tiggr.__registerComponent('mobilegrid2', new Tiggr.BaseComponent({
        id: 'mobilegrid2',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell1', new Tiggr.BaseComponent({
        id: 'mobilegridcell1',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilelabel14', new Tiggr.BaseComponent({
        id: 'mobilelabel14',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell2', new Tiggr.BaseComponent({
        id: 'mobilegridcell2',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell3', new Tiggr.BaseComponent({
        id: 'mobilegridcell3',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilelabel16', new Tiggr.BaseComponent({
        id: 'mobilelabel16',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell4', new Tiggr.BaseComponent({
        id: 'mobilegridcell4',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell5', new Tiggr.BaseComponent({
        id: 'mobilegridcell5',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilelabel15', new Tiggr.BaseComponent({
        id: 'mobilelabel15',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell6', new Tiggr.BaseComponent({
        id: 'mobilegridcell6',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell7', new Tiggr.BaseComponent({
        id: 'mobilegridcell7',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell8', new Tiggr.BaseComponent({
        id: 'mobilegridcell8',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell9', new Tiggr.BaseComponent({
        id: 'mobilegridcell9',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell10', new Tiggr.BaseComponent({
        id: 'mobilegridcell10',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell11', new Tiggr.BaseComponent({
        id: 'mobilegridcell11',
        context: '#j_3'
    }));
    Tiggr.__registerComponent('mobilegridcell12', new Tiggr.BaseComponent({
        id: 'mobilegridcell12',
        context: '#j_3'
    }));
    for (var idx = 0; idx < datasources.length; idx++) {
        datasources[idx].__setupDisplay();
    }
    screen_C0BE_elementsExtraJS();
    try {
        restservice7.execute({})
    } catch (ex) {
        console.log(ex.name + '  ' + ex.message);
        hideSpinner();
    };
    j_0_windowEvents();
    screen_C0BE_elementsEvents();
}
// screen window events
screen_C0BE_windowEvents = j_0_windowEvents = function() {
    $('#j_0').bind('pageshow orientationchange', function() {
        adjustContentHeightWithPadding();
    });
}
// screen elements extra js
screen_C0BE_elementsExtraJS = j_0_elementsExtraJS = function() {
    // screen (screen-C0BE) extra code
}
// screen elements handler
screen_C0BE_elementsEvents = j_0_elementsEvents = function() {
    $("a :input,a a,a fieldset label").live({
        click: function(event) {
            event.stopPropagation();
        }
    });
}
$("body").undelegate("pagebeforeshow").delegate("#j_0", "pagebeforeshow", function(event, ui) {
    j_0_onLoad();
});